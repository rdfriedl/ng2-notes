<header>
	<!-- nav bar -->
	<nav class="card card-inverse rounded-0 flex-row p-2" style="background-color: #333; border-color: #333;">
		<h3 class="navbar-brand p-0 m-0 mr-3 hidden-sm-down" routerLink="/notes">Ng2 Notes</h3>

		<!-- mobile buttons -->
		<button class="btn btn-default mr-auto" type="button" routerLink="/notes"><i class="fa fa-chevron-left"></i> Back</button>
		<button class="btn mx-auto hidden-md-up" type="button" (click)="toggleMobilePreview()" [ngClass]="{'btn-primary': mobilePreview, 'btn-outline-primary': !mobilePreview}"><i class="fa fa-eye"></i> Preview</button>

		<!-- desktop buttons -->
		<button class="btn btn-success ml-auto" type="submit" [disabled]="!noteForm.form.valid" form="new-note-form"><i class="fa fa-check"></i> <span>Save</span></button>
	</nav>
</header>

<main class="page-content">
	<form id="new-note-form" class="pt-3" (ngSubmit)="saveNote()" #noteForm="ngForm">
		<div class="container">
			<div class="row" *ngIf="!mobilePreview">
				<div class="col-md-6 col-sm-12">
					<div class="form-group">
						<input type="text" name="title" class="form-control" placeholder="Title" [(ngModel)]="modal.title" autocomplete="off">
					</div>
					<div class="form-group">
						<textarea class="form-control" name="content" placeholder="Some relevant infomation" [(ngModel)]="modal.content" required style="height: 35vh;" autocomplete="off"></textarea>
					</div>
					<div class="form-group d-flex flex-row">
						<input type="file" accept="image/*;capture=camera" class="form-control" name="image" (change)="uploadEvent($event)">
						<button class="btn btn-danger" type="button" *ngIf="modal.image" (click)="modal.image = ''">Remove</button>
					</div>
				</div>
				<div class="col-6 hidden-sm-down">
					<div class="form-group">
						<div class="card">
							<img class="card-img-top" *ngIf="modal.image" [src]="modal.image" style="width: 100%; pointer-events: none;">
							<div class="card-block">
	 							<h4 class="card-title" *ngIf="modal.title">{{modal.title}}</h4>
								<div class="card-text markdown" [innerHTML]="modal.content | MarkdownToHtml"></div>
								<div class="card-text text-muted"><small>Note Preview</small></div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row" *ngIf="mobilePreview">
				<div class="col-12">
					<div class="card">
						<img class="card-img-top" *ngIf="modal.image" [src]="modal.image" style="width: 100%; pointer-events: none;">
						<div class="card-block">
	 						<h4 class="card-title" *ngIf="modal.title">{{modal.title}}</h4>
							<div class="card-text markdown" [innerHTML]="modal.content | MarkdownToHtml"></div>
							<div class="card-text text-muted"><small>Note Preview</small></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</form>
</main>
