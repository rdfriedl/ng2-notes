<!-- nav bar -->
<nav class="card card-inverse rounded-0 flex-row p-2" style="background-color: #333; border-color: #333;">
	<h3 class="navbar-brand p-0 m-0 mr-3 hidden-xs-down" routerLink="/notes">Ng2 Notes</h3>

	<!-- mobile buttons -->
	<button class="btn btn-default mr-auto" type="button" routerLink="/notes"><i class="fa fa-chevron-left"></i> Back</button>
	<button class="btn mx-auto hidden-sm-up" type="button" (click)="toggleMobilePreview()" [ngClass]="{'btn-primary': mobilePreview, 'btn-outline-primary': !mobilePreview}"><i class="fa fa-eye"></i> Preview</button>

	<!-- desktop buttons -->
	<button class="btn btn-success ml-auto" type="submit" [disabled]="!noteForm.form.valid" form="new-note-form"><i class="fa fa-check"></i> <span>Save</span></button>
</nav>

<form id="new-note-form" class="pt-3" (ngSubmit)="createNote()" #noteForm="ngForm">
	<div class="container">
		<div class="row" *ngIf="!mobilePreview">
			<div class="col-md-6 col-sm-12">
				<div class="form-group">
					<input type="text" name="title" class="form-control" placeholder="Title" [(ngModel)]="note.title" autocomplete="off">
				</div>
				<!-- <div class="form-group">
					<select name="type" class="form-control" [(ngModel)]="note.type" required>
						<option value="note">Simple Note</option>
						<option value="list">Check List</option>
					</select>
				</div> -->
				<div class="form-group">
					<textarea class="form-control" name="content" placeholder="Some relevant infomation" *ngIf="note.type == 'note'" [(ngModel)]="note.content" required style="height: 35vh;" autocomplete="off"></textarea>

					<!-- checklist -->
					<ul class="list-group" *ngIf="note.type == 'list'">
						<li class="list-group-item" *ngFor="let item of note.items">
							<textarea type="text" name="item" class="form-control" [(ngModel)]="item.content"></textarea>
						</li>
					</ul>
					<button class="btn btn-success btn-block" type="button" *ngIf="note.type == 'list'" (click)="addItem()"><i class="fa fa-plus"></i> Add Item</button>
				</div>
			</div>
			<div class="col-6 hidden-sm-down">
				<div class="form-group">
					<label>Preview</label>
					<div class="card">
						<div class="card-header" *ngIf="note.title">{{note.title}}</div>
						<div class="card-block" *ngIf="note.type == 'note'">
							<div class="card-text markdown" [innerHTML]="note.content | MarkdownToHtml"></div>
						</div>

						<!-- checklist -->
						<ul class="list-group list-group-flush" *ngIf="note.type == 'list'">
							<li class="list-group-item markdown" *ngFor="let item of note.items">

								<div [innerHTML]="item.content | MarkdownToHtml"></div>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<div class="row" *ngIf="mobilePreview">
			<div class="col-12">
				<div class="card">
					<div class="card-header" *ngIf="note.title">{{note.title}}</div>
					<div class="card-block" *ngIf="note.type == 'note'">
						<div class="card-text markdown" [innerHTML]="note.content | MarkdownToHtml"></div>
					</div>

					<!-- checklist -->
					<ul class="list-group list-group-flush" *ngIf="note.type == 'list'">
						<li class="list-group-item markdown" *ngFor="let item of note.items">

							<div [innerHTML]="item.content | MarkdownToHtml"></div>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</form>
